<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Basic RT components and utilities: $title</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Basic RT components and utilities
   &#160;<span id="projectnumber">315.2.6</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="introduction"></a>
Overview</h2>
<p>This component is generate walking pattern and control Center Of Gravity (COG) for legged robots without sensor feedback.</p>
<h3><a class="anchor" id="cog"></a>
COG control</h3>
<p>This component modifies input joint angles to track reference COG position. This component receives reference joint angles from "qRef" inport. Then it solves Inverse Kinematics (or something) to track reference COG position, obtains jonint angles, and outputs the joint angles as "q" outport.</p>
<p>In this calculation, this component tracks reference XY COG position, reference Z base position, and reference base orientation.</p>
<h3><a class="anchor" id="mode"></a>
Mode</h3>
<p>This component has modes and behaves as Finite State Machine. By default, this component is idle mode ("MODE_IDLE"), in which it do not modify input joint angles. When <a class="el" href="../../d4/d5b/interfaceOpenHRP_1_1AutoBalancerService.html#a64c4d4663874a9b36c75ca46c6ba3994" title="Start AutoBalancer mode in which the robot controls the COM.">OpenHRP::AutoBalancerService::startAutoBalancer()</a> are called in IDLE mode, it switches to controlling mode ("MODE_ABC"), in which it modifies joint angles. When <a class="el" href="../../d4/d5b/interfaceOpenHRP_1_1AutoBalancerService.html#ad36bf04c5a607f39fb58fae1922c222c" title="Stop AutoBalancer mode.">OpenHRP::AutoBalancerService::stopAutoBalancer()</a> are called in controlling mode, it switches to idle mode.</p>
<h3><a class="anchor" id="eef"></a>
Controlled end-effectors</h3>
<p>User can specify which end-effector is controlled by the argument of <a class="el" href="../../d4/d5b/interfaceOpenHRP_1_1AutoBalancerService.html#a64c4d4663874a9b36c75ca46c6ba3994" title="Start AutoBalancer mode in which the robot controls the COM.">OpenHRP::AutoBalancerService::startAutoBalancer()</a>. When <a class="el" href="../../d4/d5b/interfaceOpenHRP_1_1AutoBalancerService.html#a64c4d4663874a9b36c75ca46c6ba3994" title="Start AutoBalancer mode in which the robot controls the COM.">OpenHRP::AutoBalancerService::startAutoBalancer()</a> are called with ["rleg", "lleg"], it controlles reference end-effector position and orientation for "rleg" and "lleg". When <a class="el" href="../../d4/d5b/interfaceOpenHRP_1_1AutoBalancerService.html#a64c4d4663874a9b36c75ca46c6ba3994" title="Start AutoBalancer mode in which the robot controls the COM.">OpenHRP::AutoBalancerService::startAutoBalancer()</a> are called with ["rleg", "lleg", "rarm", "larm"], it controlles reference end-effector for "rleg", "lleg", "rarm", "larm". In this case, the robot seems to keep both feet and hands position and orientation.</p>
<h3><a class="anchor" id="wpg"></a>
Walking pattern generation</h3>
<p>This component has also the feature as walking pattern generation, named as GaitGenerator. When <a class="el" href="../../d4/d5b/interfaceOpenHRP_1_1AutoBalancerService.html#ab1228769703a5a8403f80f34c4f96010" title="Walk to the goal position and orientation.">OpenHRP::AutoBalancerService::goPos()</a>, <a class="el" href="../../d4/d5b/interfaceOpenHRP_1_1AutoBalancerService.html#ad76d7a7c8aff5c0fa95c16b267929bcd" title="Walk at the desired velocity.">OpenHRP::AutoBalancerService::goVelocity()</a>, <a class="el" href="../../d4/d5b/interfaceOpenHRP_1_1AutoBalancerService.html#a69a486e3a60bfdeef6c53041f5d251a6" title="Set footsteps.">OpenHRP::AutoBalancerService::setFootSteps()</a> are called, this component starts to use reference XY COG position from "GaitGenerator". For <a class="el" href="../../d4/d5b/interfaceOpenHRP_1_1AutoBalancerService.html#ab1228769703a5a8403f80f34c4f96010" title="Walk to the goal position and orientation.">OpenHRP::AutoBalancerService::goPos()</a> and <a class="el" href="../../d4/d5b/interfaceOpenHRP_1_1AutoBalancerService.html#a69a486e3a60bfdeef6c53041f5d251a6" title="Set footsteps.">OpenHRP::AutoBalancerService::setFootSteps()</a>, this component stops to use it after completing walking command. After <a class="el" href="../../d4/d5b/interfaceOpenHRP_1_1AutoBalancerService.html#ad76d7a7c8aff5c0fa95c16b267929bcd" title="Walk at the desired velocity.">OpenHRP::AutoBalancerService::goVelocity()</a> is called, this component continuously generates walking pattern. When <a class="el" href="../../d4/d5b/interfaceOpenHRP_1_1AutoBalancerService.html#a5b1b21542295ce1dc9dfc9493677cf79" title="Stop stepping.">OpenHRP::AutoBalancerService::goStop()</a> are called in this case, this completing stops to use it after completing walking command.</p>
<table class="doxtable">
<tr>
<th>implementation_id</th><td>AutoBalancer </td></tr>
<tr>
<th>category</th><td>example </td></tr>
</table>
<h2><a class="anchor" id="dataports"></a>
Data Ports</h2>
<h3><a class="anchor" id="inports"></a>
Input Ports</h3>
<table class="doxtable">
<tr>
<th>port name</th><th>data type</th><th>unit</th><th>description </th></tr>
<tr>
<td>qCurrent</td><td>RTC::TimedDoubleSeq</td><td>[rad]</td><td>Actual joint angles </td></tr>
<tr>
<td>qRef</td><td>RTC::TimedDoubleSeq</td><td>[rad]</td><td>Reference joint angles </td></tr>
</table>
<h3><a class="anchor" id="outports"></a>
Output Ports</h3>
<table class="doxtable">
<tr>
<th>port name</th><th>data type</th><th>unit</th><th>description </th></tr>
<tr>
<td>q</td><td>RTC::TimedDoubleSeq</td><td>[rad]</td><td>Output reference joint angles </td></tr>
<tr>
<td>zmpRef</td><td>RTC::TimedPoint3D</td><td>[m]</td><td>Output ZMP in base frame </td></tr>
<tr>
<td>basePos</td><td>RTC::TimedPoint3D</td><td>[m]</td><td>Output base position </td></tr>
<tr>
<td>baseRpy</td><td>RTC::TimedOrientation3D</td><td>[rad]</td><td>Output base orientation (RPY) </td></tr>
<tr>
<td>baseTformOut</td><td>RTC::TimedDoubleSeq</td><td>[m], [rad]</td><td>Output base position and orientation (RPY) </td></tr>
<tr>
<td>accRef</td><td>RTC::TimedAcceleration3D</td><td>[m/s^2]</td><td>Output attitude sensor's acceleration </td></tr>
<tr>
<td>contactStates</td><td>RTC::TimedBooleanSeq</td><td>NA</td><td>Reference end-effector contact states (True=contact, False=no-contact) </td></tr>
<tr>
<td>controlSwingSupportTime</td><td>RTC::TimedDouble</td><td>[s]</td><td>Time of swing phase </td></tr>
</table>
<h2><a class="anchor" id="serviceports"></a>
Service Ports</h2>
<h3><a class="anchor" id="provider"></a>
Service Providers</h3>
<table class="doxtable">
<tr>
<th>port name</th><th>interface name</th><th>service type</th><th>IDL</th><th>description </th></tr>
<tr>
<td>AutoBalancerService</td><td>service0</td><td>AutoBalancerService</td><td><a class="el" href="../../d4/d5b/interfaceOpenHRP_1_1AutoBalancerService.html">OpenHRP::AutoBalancerService</a></td><td>AutoBalancerService </td></tr>
</table>
<h3><a class="anchor" id="consumer"></a>
Service Consumers</h3>
<p>N/A</p>
<h2><a class="anchor" id="configuration"></a>
Configuration Variables</h2>
<table class="doxtable">
<tr>
<th>name</th><th>type</th><th>unit</th><th>default value</th><th>description </th></tr>
<tr>
<td>debugLevel</td><td>int</td><td></td><td>0</td><td>debug level </td></tr>
</table>
<h2><a class="anchor" id="conf"></a>
Configuration File</h2>
<p>N/A </p>
</div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 10 2014 15:14:38 for Basic RT components and utilities by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
